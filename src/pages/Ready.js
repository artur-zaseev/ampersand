import React, {useEffect} from "react";
import anime from "animejs";

// Image
import {ReactComponent as Logo} from "../static/logo.svg";
import {ReactComponent as Image} from "../static/basket_ready.svg";

// Redux
import {useSelector, useDispatch} from "react-redux";

// Actions
import {updateAllBasket} from "../redux-actions";

export default function Ready() {
  const basket = useSelector(state => state.basketReducer);
  const dispatch = useDispatch();

  useEffect(() => {
    let _emptyBasket = basket.map(book => ({...book, count: 0}));
    dispatch(updateAllBasket(_emptyBasket));
  }, []);

  useEffect(() => {
    anime({
      targets: ".morthing",
      d: [
        {
          value:
            "M50.9946 156.298C50.9946 156.298 6.80846 181.451 0.463792 244.445C-5.88094 307.439 63.4574 395.812 74.1074 475.575C84.5308 555.337 0.463702 574.372 34.2265 675.208C67.9893 776.044 244.281 799.157 338.771 759.276C433.262 719.394 477.448 618.558 618.164 618.558C758.88 618.558 859.941 553.298 851.557 408.502C843.173 263.706 811.676 219.293 698.152 135.225C584.628 51.1568 189.671 13.315 50.9946 156.298Z",
          duration: 1
        },
        {
          value:
            "M145.402 34.1052C-36.4067 15.3471 -3.53666 147.548 17.022 200.716C41.0307 262.806 92.6987 272.061 103.349 351.823C113.772 431.586 32.5689 454.582 66.3316 555.418C100.094 656.254 255.24 698.301 349.731 658.42C444.221 618.538 490.879 536.197 631.595 536.197C772.311 536.197 873.373 470.937 864.989 326.14C856.605 181.344 775.474 95.0585 693.164 34.1052C579.639 -49.9627 327.211 52.8633 145.402 34.1052Z"
        },
        {
          value:
            "M229.098 73.8829C47.2894 55.1248 0.612341 145.801 0.612341 202.805C0.612341 288.328 45.6984 278.691 56.3483 358.453C66.7717 438.216 51.2303 415.935 71.0255 475.056C104.788 575.892 264.766 617.616 359.256 577.735C453.747 537.853 452.172 612.547 592.888 612.547C733.604 612.547 826.373 477.567 817.989 332.771C809.605 187.975 722.428 87.6073 640.117 26.654C526.593 -57.4138 410.907 92.641 229.098 73.8829Z"
        },
        {
          value:
            "M259.795 72.6864C77.9868 53.9283 40.0818 125.539 40.0818 182.543C40.0818 268.066 -5.65597 308.414 0.928671 357.729C6.70187 400.967 18.1937 445.518 35.8974 469.772C102.76 561.374 249.81 594.247 344.301 554.366C438.791 514.485 447.172 599.385 587.888 599.385C728.604 599.385 821.373 464.405 812.989 319.609C804.605 174.813 721.725 59.5386 627.651 19.0348C472.085 -47.9451 441.604 91.4445 259.795 72.6864Z"
        },
        {
          value:
            "M50.9946 156.298C50.9946 156.298 6.80846 181.451 0.463792 244.445C-5.88094 307.439 63.4574 395.812 74.1074 475.575C84.5308 555.337 0.463702 574.372 34.2265 675.208C67.9893 776.044 244.281 799.157 338.771 759.276C433.262 719.394 477.448 618.558 618.164 618.558C758.88 618.558 859.941 553.298 851.557 408.502C843.173 263.706 811.676 219.293 698.152 135.225C584.628 51.1568 189.671 13.315 50.9946 156.298Z"
        }
      ],
      easing: "linear",
      duration: 25000,
      loop: true
    });
  }, []);

  return (
    <div className="ready">
      <div className="page_title">
        <h1>
          <Logo />
          <span>Корзина</span>
        </h1>
      </div>
      <div className="ready_body">
        <div className="text">
          <p>
            Ваш заказ обрабатывается!
            <br />
            Менеджер свяжется с Вами
          </p>
        </div>
        <div className="image">
          <Image />
        </div>
      </div>
    </div>
  );
}
